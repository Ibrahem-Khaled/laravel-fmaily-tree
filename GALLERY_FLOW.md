# مخطط تدفق معرض الصور الشخصية

```
صفحة العائلة الرئيسية
        ↓
    [زر التفاصيل]
        ↓
   مودال التفاصيل
        ↓
[زر معرض الصور] ← يظهر فقط إذا كان للشخص صور
        ↓
  صفحة معرض الصور الشخصية
        ↓
┌─────────────────────────────────────┐
│  هيدر الشخص + الإحصائيات            │
│  - صورة الشخص                       │
│  - الاسم الكامل                     │
│  - عدد الصور، العمر، الجنس          │
└─────────────────────────────────────┘
        ↓
┌─────────────────────────────────────┐
│  أدوات الفلترة والبحث                │
│  - البحث في الصور                   │
│  - فلترة حسب المقال                 │
│  - عداد الصور لكل فلتر              │
└─────────────────────────────────────┘
        ↓
┌─────────────────────────────────────┐
│  شبكة الصور (Masonry Layout)        │
│  - عرض الصور بتخطيط ذكي             │
│  - تأثيرات Hover مع المعلومات      │
│  - أزرار العرض والتحميل             │
└─────────────────────────────────────┘
        ↓
    [النقر على الصورة]
        ↓
┌─────────────────────────────────────┐
│  مودال عرض الصورة                   │
│  - عرض الصورة بحجم كبير             │
│  - أزرار الزوم (تكبير/تصغير/إعادة)  │
│  - معلومات الصورة التفصيلية         │
│  - زر التحميل                       │
│  - التنقل بالكيبورد                 │
└─────────────────────────────────────┘
```

## الميزات التفاعلية

### في صفحة المعرض:
- **البحث المباشر**: يفلتر الصور أثناء الكتابة
- **الفلترة السريعة**: حسب المقال المرتبط
- **تأثيرات Hover**: تظهر معلومات الصورة عند التمرير
- **Lazy Loading**: تحميل الصور عند الحاجة

### في مودال الصورة:
- **الزوم التفاعلي**: تكبير/تصغير سلس
- **التحميل المباشر**: حفظ الصورة على الجهاز
- **التنقل بالكيبورد**: 
  - `Escape`: إغلاق المودال
  - `+` أو `=`: تكبير
  - `-`: تصغير
  - `0`: إعادة تعيين الزوم

## تحسينات الأداء

1. **Cache API**: تخزين بيانات العائلة لمدة 30 دقيقة
2. **Lazy Loading**: تحميل الصور عند ظهورها في الشاشة
3. **تحسين الاستعلامات**: استخدام withCount لتجنب N+1 queries
4. **Compression**: ضغط الصور تلقائياً
5. **CDN Ready**: جاهز لاستخدام CDN للصور

## التوافق والاستجابة

- **Mobile First**: مصمم للأجهزة المحمولة أولاً
- **RTL Support**: دعم كامل للغة العربية
- **Cross Browser**: متوافق مع جميع المتصفحات الحديثة
- **Accessibility**: دعم قارئات الشاشة

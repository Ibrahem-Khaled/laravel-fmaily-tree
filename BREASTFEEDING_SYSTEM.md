# نظام إدارة الرضاعة - Family Tree App

## نظرة عامة
تم إضافة نظام إدارة الرضاعة إلى تطبيق شجرة العائلة، والذي يسمح بتتبع العلاقات بين الأمهات المرضعات والأطفال المرتضعين.

## الميزات الرئيسية

### 1. إدارة علاقات الرضاعة
- إضافة علاقات رضاعة جديدة
- تعديل العلاقات الموجودة
- حذف العلاقات
- تفعيل/إلغاء تفعيل العلاقات

### 2. تتبع المعلومات
- الأم المرضعة (يجب أن تكون أنثى)
- الطفل المرتضع
- تاريخ بداية الرضاعة
- تاريخ انتهاء الرضاعة
- ملاحظات إضافية
- حالة العلاقة (نشط/غير نشط)

### 3. حساب المدة التلقائي
- حساب مدة الرضاعة بالأيام
- حساب مدة الرضاعة بالأشهر
- تحديد ما إذا كانت الرضاعة مستمرة أم انتهت

### 4. واجهة المستخدم
- لوحة تحكم تفاعلية باستخدام Livewire
- عرض العلاقات في جداول منظمة
- إمكانية البحث والفلترة
- ترتيب البيانات حسب معايير مختلفة

## الملفات المضافة/المعدلة

### النماذج (Models)
- `app/Models/Breastfeeding.php` - نموذج علاقات الرضاعة
- `app/Models/Person.php` - تم إضافة العلاقات الجديدة

### المتحكمات (Controllers)
- `app/Http/Controllers/admin/BreastfeedingController.php` - متحكم إدارة الرضاعة

### مكونات Livewire
- `app/Livewire/BreastfeedingManagement.php` - مكون إدارة الرضاعة

### قاعدة البيانات
- `database/migrations/2025_09_21_135729_create_breastfeedings_table.php` - جدول الرضاعة
- `database/seeders/BreastfeedingSeeder.php` - بيانات تجريبية

### الواجهات (Views)
- `resources/views/livewire/breastfeeding-management.blade.php` - واجهة إدارة الرضاعة
- `resources/views/admin/breastfeeding/index.blade.php` - صفحة الفهرس
- `resources/views/dashboard/people/show.blade.php` - تم إضافة قسم الرضاعة
- `resources/views/layouts/sidebar.blade.php` - تم إضافة رابط الرضاعة

### المسارات (Routes)
- تم إضافة مسارات إدارة الرضاعة في `routes/web.php`

## العلاقات في قاعدة البيانات

### جدول breastfeedings
```sql
- id (Primary Key)
- nursing_mother_id (Foreign Key -> persons.id)
- breastfed_child_id (Foreign Key -> persons.id)
- start_date (Date, nullable)
- end_date (Date, nullable)
- notes (Text, nullable)
- is_active (Boolean, default: true)
- created_at, updated_at (Timestamps)
```

### العلاقات في نموذج Person
- `nursingRelationships()` - العلاقات التي تكون فيها الشخصية أم مرضعة
- `breastfedRelationships()` - العلاقات التي تكون فيها الشخصية طفل مرتضع
- `breastfedChildren()` - الأطفال الذين أرضعتهم هذه الشخصية
- `nursingMothers()` - الأمهات المرضعات اللاتي أرضعن هذه الشخصية
- `activeNursingRelationships()` - العلاقات النشطة كأم مرضعة
- `activeBreastfedRelationships()` - العلاقات النشطة كطفل مرتضع

## الاستخدام

### الوصول للنظام
1. تسجيل الدخول للوحة التحكم
2. النقر على "الرضاعة" في القائمة الجانبية
3. أو الانتقال مباشرة إلى `/dashboard/breastfeeding`

### إضافة علاقة رضاعة جديدة
1. النقر على "إضافة علاقة رضاعة جديدة"
2. اختيار الأم المرضعة (يجب أن تكون أنثى)
3. اختيار الطفل المرتضع
4. إدخال تواريخ البداية والنهاية (اختياري)
5. إضافة ملاحظات (اختياري)
6. تحديد حالة العلاقة
7. النقر على "إضافة"

### عرض علاقات الرضاعة في ملف الشخص
- عند عرض ملف أي شخص، سيظهر قسم "علاقات الرضاعة"
- يعرض العلاقات التي يكون فيها الشخص أم مرضعة أو طفل مرتضع
- يمكن الانتقال إلى صفحة إدارة الرضاعة من خلال الزر المخصص

## القيود والتحقق
- الأم المرضعة يجب أن تكون أنثى
- لا يمكن أن تكون الأم المرضعة والطفل المرتضع نفس الشخص
- العلاقة يجب أن تكون فريدة بين كل أم وطفل
- تاريخ النهاية يجب أن يكون بعد تاريخ البداية أو مساوياً له
- تاريخ البداية لا يمكن أن يكون في المستقبل

## البيانات التجريبية
تم إنشاء seeder يحتوي على بيانات تجريبية لاختبار النظام:
```bash
php artisan db:seed --class=BreastfeedingSeeder
```

## التطوير المستقبلي
- إضافة تقارير إحصائية عن الرضاعة
- إضافة إشعارات للرضاعة المستمرة
- إضافة تصدير البيانات
- إضافة رسوم بيانية للعلاقات
